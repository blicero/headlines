{# -*- mode: jinja2; coding: utf-8; -*-
Time-stamp: <2025-11-28 19:38:50 krylon>
/data/code/python/headlines/web/templates/blacklist.jinja
created on 24. 11. 2025
(c) 2025 Benjamin Walkenhorst
 #}

{% extends "main.jinja" %}

{% block content %}
  <div class="centered">
    <button class="btn btn-primary btn-sm"
            data-bs-toggle="collapse"
            href="#collapse_bl_form"
            aria-expanded="false"
            aria-controls="#collapse_bl_form">
            Add Pattern
    </button>

    <div class="collapse" id="collapse_bl_form">
      <p>
      </p>
      Pattern:
      <input type="text"
             id="bl_pat_input"
             oninput="bl_pat_valid_notify();"
             />
      &nbsp;
      <span id="bl_pat_check_res">
      </span>
      <p>
      </p>
      <button type="button"
              class="btn btn-sm btn-secondary"
              onclick="bl_pat_input_clear();">
              Reset
      </button>
      
      <button type="button"
              class="btn btn-sm btn-success"
              onclick="bl_pat_check();">
        Check regex
      </button>
      
      <button type="button"
              class="btn btn-sm btn-primary"
              onclick="bl_pat_save();">
        Save
      </button>
    </div>
  </div>

  <p>
    <hr />
  </p>

  <div>
    <table class="table table-striped table-secondary" id="bl_pat_tbl">
      <thead>
        <tr>
          <th>ID</th>
          <th>Pattern</th>
          <th>Hits</th>
          <th>&nbsp;</th>
        </tr>
      </thead>

      <tbody id="bl_items">
        {% for item in blacklist.items %}
          <tr id="bl_pat_row_{{ item.item_id }}">
            <td class="num">{{ item.item_id }}</td>
            <td id="bl_pat_{{ item.item_id }}">
              {{ item.pattern.pattern }}
            </td>
            <td class="num">{{ item.cnt }}</td>
            <td>
              <button type="button"
                      class="btn btn-sm"
                      onclick="bl_pat_edit({{ item.item_id }}, `{{ item.pattern.pattern }}`);"
                      >
                Edit
              </button>
              &nbsp;
              <a href="#"
                 onclick="bl_item_delete({{ item.item_id }});">
                 <img src="/static/delete.png" />
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}


